#데이터베이스 6주차 2차시

설계의 5단계

1단계 요구사항 분석
        - 데이터베이스의 용도 파악
        - 결과물: 요구 사항 명세서

2단계 개념적 설계
        - DBMS에 독립적인 개념적 구조 설계
        - 결과물: 개념적 스키마(E-R 다이어그램)

3단계 논리적 설계
        목적
                - DBMS에 적합한 논리적 스키마 설계
                - 개념적 스키마를 논리적 데이터 모델을 이용해 논리적 구조로 표현
                        논리적 모델링(데이터 모델링)
                        - 일반적으로 관계 데이터 모델을 많이 이용
        결과물
                - 논리적 스키마: 릴레이션 스키마

        주요 작업
                - 개념적 설계 단계의 결과물인 E-R 다이어그램을 릴레이션 스키마로 변환
                - 릴레이션 스키마 변환 후 속성의 데이터 타입, 길이, 널 값 허용여부, 기본값,
                제약 조건 등을 세부적으로 결정하고 결과를 문서화시킴

        E-R 다이어그램을 릴레이션 스키마로 변환하는 규칙
                - 규칙 1: 모든 개체는 릴레이션으로 변환한다.
                - 규칙 2: 다대다(n:m) 관계는 릴레이션으로 변환한다.
                - 규칙 3: 일대다(1:n)관계는 외래키로 표현한다
                - 규칙 4: 일대일(1:1)관계는 외래키로 표현한다
                - 규칙 5: 다중값 속성은 별도의 추가 릴레이션으로 변환한다.

                변환 규칙을 순서대로 적용하되, 해당되지 않는 규치은 제외한다.

        규칙 1: 모든 개체는 릴레이션으로 변환한다.

                - 개체의 이름 -> 릴레이션 이름

                - 개체의 속성 -> 릴레이션의 속성

                - 개체의 키 속성 -> 릴레이션의 기본키

                - 개체의 속성이 복합속성인 경우에는 복합 소성을 구성하고 있는 단순 속성만
                  릴레이션 속성으로 변한
                        - 주소가 (우편번호, 기본주소, 상세주소)로 구성된 복합속성이라면 주소는 버리고
                        우편번호, 기본주소, 상셎소만 릴레이션의 속성으로 포함함

        규칙 2: 다대다(n:m) 관계는 릴레이션으로 변환한다.

                - E-R다이어그램의 다대다 관계를 하나의 하나의 릴레이션으로 변환

                        - 관계의 이름 -> 릴레이션 이름

                        - 관계의 속성 -> 릴레이션의 속성

                        - 관계에 참여하는 개체를 규칙 1에 따라 릴레이션으로 변환 후 이 릴레이션의
                        기본 키를 관계 릴레이션에 포함시켜 외래키로 지정하고 외래키들을 조합하여 관계
                        릴레이션의 기본 키로 지정

                        - 별도의 기본키가 생성이 되나 이는 E-R다이어그램이 아닌 요구사항명세서에 나타난다

        규칙 3: 일대다(1:n)관계는 외래키로 표현한다
                - E-R 다이어그램의 일대다 관계는 외래키로만 표현
                        - 다측 릴레이션에 1측 릴레이션의 기본키를 외래키로 포함
                        - 관계의 속성들도 n측 개체 릴레이션에 포함

        규칙 4: 일대일(1:1)관계는 외래키로 표현한다

               - 일반적인 일대일 관계는 외래키를 서로 주고받는다.
                      ex) 혼인에 대해서 작성할 경우, 남자->여자, 여자->남자

               - 필수적으로 참여하는 개체 릴레이션만 외래키를 받는다.

               - 모든 개체가 필수적으로 참여하면 릴레이션을 하나로 합친다.
                      (남자번호 여자번호 참조할 수 없으므로 외래키x)

        규칙 5: 다중값 속성은 별도의 추가 릴레이션으로 변환한다.

                - 중복 저장 문제 발생

                - 릴레이션 속성에 다중 값을 저장 불가

                - 독립적 릴레이션으로 변환할 경우 불필요한 중복 제거 가능하면서 다중값 저장이 가능하다

        기타 고려사항

                - 모든 관계를 독립적인 릴레이션으로 변환할 수 있다.
                        속성이 많은 관계는 유형에 상관없이 릴레이션으로의 변환을 고려할 수 있음

                - 개체가 자기 자신과 관계를 맺는 순환 관계도 기본 규칙을 그대로 적용
